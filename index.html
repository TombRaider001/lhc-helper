<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>å…­åˆå½©é–‹ç + æ¨è–¦å·¥å…·</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4f4; padding: 20px; max-width:720px; margin:auto; }
    h1, h2 { text-align:center; }
    .card { background:white; padding:16px; border-radius:8px; margin:20pxâ€¯0; box-shadow:0 0 10px rgba(0,0,0,0.1); }
    .btn { padding:10px 20px; background:#007BFF; color:#fff; border:none; border-radius:5px; cursor:pointer; margin:10px 0; }
    .btn-green { background:#28A745 }
    .ball { display:inline-block; width:36px;height:36px;line-height:36px;background:#2196F3;color:#fff;border-radius:50%;margin:4px; }
  </style>
</head>
<body>

  <h1>å…­åˆå½© é–‹ç & æ¨è–¦</h1>

  <div class="card">
    <h2>ğŸ“Œ æœ€æ–°é–‹çè™Ÿç¢¼</h2>
    <button class="btn" onclick="loadLatest()">é»æ“Šç²å–</button>
    <div id="latest" style="margin-top:10px;">-- å°šæœªç²å– --</div>
  </div>

  <div class="card">
    <h2>âœ¨ æ¨è–¦è™Ÿç¢¼</h2>
    <button class="btn-green" onclick="generate()">ç”Ÿæˆæ¨è–¦</button>
    <div><strong>ç†±è™Ÿï¼š</strong><div id="hot"></div></div>
    <div><strong>å†·ç†±æ··åˆï¼š</strong><div id="mix"></div></div>
    <div><strong>éš¨æ©Ÿæ¨è–¦ï¼š</strong><div id="random"></div></div>
  </div>

  <script>
    let historyNums = [];

    async function loadLatest(){
      const out = document.getElementById('latest');
      out.textContent = 'åŠ è¼‰ä¸­...';
      try {
        const proxy = 'https://corsproxy.io/?' + encodeURIComponent('https://www.pilio.idv.tw/ltohk/list.asp');
        const res = await fetch(proxy);
        const html = await res.text();

        const regex = /<font color="#0000ff" size="2"><b>(\d{2})<\/b><\/font><\/td>/g;
        const nums = [...html.matchAll(regex)].map(m => m[1]).slice(0,7);
        historyNums = nums; // åªç”¨æœ€æ–°ä¸€æœŸæ•°æ®
        
        out.innerHTML = nums.map(n=>`<span class="ball">${n}</span>`).join(' ');
      } catch {
        out.textContent = 'ç²å–å¤±æ•—ï¼Œè«‹ç¨å¾Œé‡è©¦';
      }
    }

    function generate(){
      if (historyNums.length < 7) return alert('è«‹å…ˆç²å–æœ€æ–°é–‹çè™Ÿç¢¼');
      const freq = {};
      historyNums.forEach(n=> freq[n] = (freq[n]||0)+1);
      for(let i=1;i<=49;i++){ const k=String(i).padStart(2,'0'); if(!freq[k]) freq[k]=0; }
      const sorted = Object.entries(freq).sort((a,b)=>b[1]-a[1]).map(e=>e[0]);
      const hot = sorted.slice(0,6);
      const cold = sorted.slice(-6);
      const mix = [...hot.slice(0,3),...cold.slice(0,3)];
      const rand=[];
      while(rand.length<6){
        let r = String(Math.floor(Math.random()*49+1)).padStart(2,'0');
        if(!rand.includes(r)) rand.push(r);
      }

      document.getElementById('hot').innerHTML = hot.map(n=>`<span class="ball">${n}</span>`).join(' ');
      document.getElementById('mix').innerHTML = mix.map(n=>`<span class="ball">${n}</span>`).join(' ');
      document.getElementById('random').innerHTML = rand.map(n=>`<span class="ball">${n}</span>`).join(' ');
    }
  </script>

</body>
</html>
