<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>æ¾³é–€å…­åˆå½© é–‹çæ¨è–¦</title>
  <style>
    body { font-family:sans-serif; max-width:720px; margin:auto; background:#f8f8f8; padding:20px; }
    .card { background:#fff; padding:16px; border-radius:8px; box-shadow:0 0 5px rgba(0,0,0,0.1); margin:20px 0; }
    .btn { background:#007BFF; color:#fff; border:none; padding:10px 20px; border-radius:6px; cursor:pointer; margin-top:10px; }
    .btn:hover { background:#0056b3; }
    .ball { display:inline-block; width:36px; height:36px; line-height:36px; text-align:center; border-radius:50%; color:#fff; margin:4px; font-weight:bold; }
    .r { background:red; } .g { background:green; } .b { background:blue; }
  </style>
</head>
<body>
  <h1>æ¾³é–€å…­åˆå½©é–‹ç & æ¨è–¦</h1>

  <div class="card">
    <h2>ğŸ“Œ æœ€æ–°é–‹çï¼ˆä¾†è‡ª macaujc.comï¼‰</h2>
    <button class="btn" onclick="loadLatest()">ç²å–é–‹çè™Ÿç¢¼</button>
    <div id="latest" style="margin-top:10px;color:#333">--</div>
  </div>

  <div class="card">
    <h2>âœ¨ æ¨è–¦è™Ÿç¢¼</h2>
    <button class="btn" onclick="generate()">ç”Ÿæˆæ¨è–¦</button>
    <div><strong>ç†±è™Ÿæ¨è–¦ï¼š</strong><div id="hot"></div></div>
    <div><strong>å†·ç†±æ··åˆï¼š</strong><div id="mix"></div></div>
    <div><strong>éš¨æ©Ÿæ¨è–¦ï¼š</strong><div id="random"></div></div>
  </div>

  <script>
    const proxy = "https://frosty-fire-4725.jonbaby1126.workers.dev/";
    let latestNums = [];

    async function loadLatest() {
      const el = document.getElementById('latest');
      el.textContent = "åŠ è¼‰ä¸­...";
      try {
        const html = await fetch(proxy).then(r => r.text());
        const matches = [...html.matchAll(/<font[^>]*?>(\d{2})<\/font>/g)].map(m => m[1]);
        if (matches.length < 7) throw new Error("è™Ÿç¢¼ä¸è¶³");
        latestNums = matches.slice(0, 7);
        el.innerHTML = latestNums.map((n, i) => {
          const color = i < 6 ? (i%3==0?'r':(i%3==1?'g':'b')) : 'r';
          return `<span class="ball ${color}">${n}</span>`;
        }).join('');
      } catch (e) {
        el.textContent = "ç²å–å¤±æ•—ï¼Œè«‹ç¨å¾Œé‡è©¦ã€‚";
      }
    }

    function generate() {
      if (latestNums.length < 6) return alert("è«‹å…ˆç²å–é–‹çè™Ÿç¢¼");
      const freq = {};
      for (let i = 1; i <= 49; i++) freq[i.toString().padStart(2, '0')] = 0;
      latestNums.forEach(n => freq[n]++);
      const sorted = Object.entries(freq).sort((a, b) => b[1] - a[1]).map(e => e[0]);
      const hot = sorted.slice(0, 6);
      const cold = sorted.slice(-6);
      const mix = [...hot.slice(0, 3), ...cold.slice(0, 3)];
      const rand = [];
      while (rand.length < 6) {
        const r = Math.floor(Math.random() * 49 + 1).toString().padStart(2, '0');
        if (!rand.includes(r)) rand.push(r);
      }
      document.getElementById("hot").innerHTML = hot.map(n => `<span class="ball g">${n}</span>`).join('');
      document.getElementById("mix").innerHTML = mix.map(n => `<span class="ball r">${n}</span>`).join('');
      document.getElementById("random").innerHTML = rand.map(n => `<span class="ball b">${n}</span>`).join('');
    }
  </script>
</body>
</html>